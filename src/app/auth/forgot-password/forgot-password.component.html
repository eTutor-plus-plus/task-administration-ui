<dke-simple-layout>
  <h3 transloco="auth.forgot.title"></h3>
  @if (!success) {
    <p transloco="auth.forgot.text" class="mb-5"></p>
  }

  <p-messages [closable]="false"/>

  @if (!success) {
    <form [formGroup]="form" (ngSubmit)="submit()" class="mt-5">
      <div class="field p-fluid mb-3">
        <label for="username" transloco="auth.forgot.username"></label>
        <input id="username" type="text" pInputText formControlName="username" autocomplete="username" autofocus>
        @if (form.controls.username.dirty) {
          <small class="block mt-1 p-error">
            {{ getErrorMessage('username') }}
          </small>
        }
      </div>

      <button pButton [label]="'auth.forgot.submit' | transloco" class="w-full"
              [disabled]="form.invalid" [loading]="loading" type="submit"></button>
      <div class="mt-4 text-right">
        <a routerLink="/auth/login" transloco="auth.forgot.toLogin" class="no-underline text-color-secondary"></a>
      </div>
    </form>
  } @else {
    <a routerLink="/auth/login" pButton transloco="auth.forgot.toLogin" class="no-underline"></a>
  }
</dke-simple-layout>
